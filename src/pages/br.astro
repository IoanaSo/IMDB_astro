---
import { supabase } from '../lib/spClient';

// Obtener datos de la tabla "namebasics1"
const { data: nameBasics, error } = await supabase
  .from('namebasics1')
  .select('*')
  .limit(10)

if (error) {
  console.error('Error al obtener los datos de namebasics1:', error.message)
}
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>NameBasics</title>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 1rem;
        font-family: sans-serif;
      }
      th, td {
        padding: 8px 12px;
        border: 1px solid #ccc;
        word-break: break-word;
        vertical-align: top;
      }
      th {
        background-color: #f0f0f0;
        text-align: left;
      }
      .imgnb{
        margin-left: 20px;
      }
    </style>
  </head>
  <body>
    <a href="/" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition no-underline">
      ⬅️ Tornar a l'inici
    </a>
    
    <h1>NameBasics</h1>

    {nameBasics && nameBasics.length > 0 ? (
        <table>
          <thead>
            <tr>
              <th>tconst</th>
              <th>titleType</th>
              <th>primaryTitle</th>
              <th>originalTitle</th>
              <th>isAdult</th>
              <th>startYear</th>
              <th>endYear</th>
              <th>runtimeMinutes</th>
              <th>genres</th>
              <th>averageRating</th>
              <th>numVotes</th>
            </tr>
          </thead>
          <tbody>
            {rows.map((row, idx) => (
              <tr key={idx}>
                <td>{row.tconst}</td>
                <td>{row.titleType}</td>
                <td>{row.primaryTitle}</td>
                <td>{row.originalTitle}</td>
                <td>{row.isAdult ?? '—'}</td>
                <td>{row.startYear ?? '—'}</td>
                <td>{row.endYear ?? '—'}</td>
                <td>{row.runtimeMinutes ?? '—'}</td>
                <td>{row.genres ?? '—'}</td>
                <td>{row.averageRating ?? '—'}</td>
                <td>{row.numVotes ?? '—'}</td>
              </tr>
            ))}
          </tbody>
        </table>
      ) : (
        <p>No s'han trobat dades a la taula <b>br1</b>.</p>
      )}
    </div>
  );
}

  </body>
</html>
